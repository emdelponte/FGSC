blogdown:::serve_site()
setwd("~/Google Drive/MyManuscripts/DelPonte-FGSC-IMAFungus/website")
blogdown:::serve_site()
knit_with_parameters('~/Google Drive/MyManuscripts/DelPonte-FGSC-IMAFungus/website/code.Rmd')
knit_with_parameters('~/Google Drive/MyManuscripts/DelPonte-FGSC-IMAFungus/website/article.Rmd', encoding = 'UTF-8')
rmarkdown::render_site
render_site
library(rmarkdown)
render_site
?render_site
render_site
setwd("~/Google Drive/MyManuscripts/DelPonte-FGSC-IMAFungus/website")
render_site
library(flexdashboard)
library(readxl)
library(tidyverse)
library(crosstalk)
library(plotly)
library(viridis)
library(gsheet)
theme_set(theme_bw())
library(purrr)
authors_net <- articles %>% select (6:19)
library(flexdashboard)
library(readxl)
library(tidyverse)
library(crosstalk)
library(plotly)
library(viridis)
library(gsheet)
theme_set(theme_bw())
Sys.setlocale("LC_ALL", 'pt_BR.UTF-8')
# carrega os dados com lat e long
s1 <- read_excel("fgsc-dat4.xlsx", 1)
s2 <- read_excel("fgsc-dat4.xlsx", 2)
s3 <- read_excel("fgsc-dat4.xlsx", 3)
s4 <- read_excel("fgsc-dat4.xlsx", 4)
s5 <- read_excel("fgsc-dat4.xlsx", 5)
s6 <- read_excel("fgsc-dat4.xlsx", 6)
s7 <- read_excel("fgsc-dat4.xlsx", 7)
s8 <- read_excel("fgsc-dat4.xlsx", 8)
s9 <- read_excel("fgsc-dat4.xlsx", 9)
s10 <- read_excel("fgsc-dat4.xlsx", 10)
s11 <- read_excel("fgsc-dat4.xlsx", 11)
s12 <- read_excel("fgsc-dat4.xlsx", 12)
s13 <- read_excel("fgsc-dat4.xlsx", 13)
s14 <- read_excel("fgsc-dat4.xlsx", 14)
s15 <- read_excel("fgsc-dat4.xlsx", 15)
s16 <- read_excel("fgsc-dat4.xlsx", 16)
s19 <- read_excel("fgsc-dat4.xlsx", 19)
s20 <- read_excel("fgsc-dat4.xlsx", 20)
s21 <- read_excel("fgsc-dat4.xlsx", 21)
s22 <- read_excel("fgsc-dat4.xlsx", 22)
s23 <- read_excel("fgsc-dat4.xlsx", 23)
s24 <- read_excel("fgsc-dat4.xlsx", 24)
s25 <- read_excel("fgsc-dat4.xlsx", 25)
s26 <- read_excel("fgsc-dat4.xlsx", 26)
s27 <- read_excel("fgsc-dat4.xlsx", 27)
s28 <- read_excel("fgsc-dat4.xlsx", 28)
s29 <- read_excel("fgsc-dat4.xlsx", 29)
s30 <- read_excel("fgsc-dat4.xlsx", 30)
s31 <- read_excel("fgsc-dat4.xlsx", 31)
s32 <- read_excel("fgsc-dat4.xlsx", 32)
s33 <- read_excel("fgsc-dat4.xlsx", 33)
s34 <- read_excel("fgsc-dat4.xlsx", 34)
s35 <- read_excel("fgsc-dat4.xlsx", 35)
s36 <- read_excel("fgsc-dat4.xlsx", 36)
s37 <- read_excel("fgsc-dat4.xlsx", 37)
s38 <- read_excel("fgsc-dat4.xlsx", 38)
s39 <- read_excel("fgsc-dat4.xlsx", 39)
fgsc2 <- rbind(s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s19, s20, s21, s22, s23, s24, s25, s26, s27, s28, s29, s30, s31, s32, s33, s34, s35, s36, s37, s38, s39)
fgsc2$Latitude <- round(jitter(fgsc2$Latitude, factor = 6),4)
fgsc2$Longitude <- round(jitter(fgsc2$Longitude, factor = 6),4)
fgsc <- fgsc2 %>% select(c(13,2,6,7, 8,9, 10, 14, 19, 20, 21))
library(plyr)
table(fgsc$FGSC)
fgsc$FGSC2 <- revalue(fgsc$FGSC,  c("F. graminearum" = "Fgra", "F. meridionale" = "Fmer", "F. cortaderiae" = "Fcor", "F. austroamericanum" = "Faus","F. asiaticum" = "Fasi", "F. louisianense" = "Flou", "F. boothii" = "Fboo", "F. gerlachii" = "Fger", "F. ussurianum" = "Fuss","F. vorosii" = "Fvor", "F. acaciae-mearnsii" = "Faca", "F. boothii X F. graminearum" = "Fboo x Fgra", "F. brasilicum" = "Fbra","F. aethiopicum" = "Faet"))
fgsc$Year <- as.numeric(fgsc$Year)
fgsc <- fgsc %>%  filter(FGSC != 30) %>%  filter(FGSC != "F. cerealis") %>% filter(FGSC != "F. culmorum")
fgsc$Host <- revalue(fgsc$Host,
c("oat" = "Oat",  "corn" = "Maize","wheat" = "Wheat", "barley" = "Barley"))
fgsc$Tri_genotype <- revalue(fgsc$Tri_genotype, c("NX2" = "NX-2"))
# load the article database
library(gsheet)
articles <-
gsheet2tbl('https://docs.google.com/spreadsheets/d/1rAC_U5upuDPHCSLi9kieb4R5tztHVJGW84aQOf6z7Lk/edit?usp=sharing')
articles <- articles %>%
filter (pub_order == 1)
articles %>%
ggplot(aes(year))+
geom_bar()+
scale_y_continuous(breaks=seq(0, 11, 1), expand=c(0.02, 0))+
scale_x_continuous(breaks=seq(2000, 2017))+
labs(y = "Number of articles", x = "Published year", title = "Articles per year")
articles %>%
ggplot(aes(reorder(journal_name, journal_name, function(x) length(x))))+
geom_bar()+
scale_y_continuous(breaks=seq(0,10), expand=c(0.01, 0))+
coord_flip()+
labs(y = "Number of articles", x = "Journals", title = "Articles per journal")
articles %>%
gather(code, country, 25:30) %>%
filter(country != "NA") %>%
ggplot(aes(reorder(country, country, function(x) length(x))))+
geom_bar()+
scale_y_continuous(breaks=seq(0,30,2), expand=c(0.01, 0))+
coord_flip()+
labs(y = "Number of articles", x = "Published year", title = "Articles per country" )
country <- articles %>%
gather(code, country, 25:30) %>%
filter(country != "NA") %>%
select(country) %>%
group_by(country) %>%
tally(sort = T)
authors <- articles %>%
gather(author, name, 6:19) %>%
filter(name != "NA") %>%
group_by(name) %>%
tally(sort = T)
authors %>%
filter(n > 2) %>%
ggplot(aes(reorder(name, n), n))+
geom_col(stat = "identity")+
scale_y_continuous(breaks=seq(0,30,3),  expand=c(0.01, 0))+
coord_flip()+
labs(x = "Author", y = "Frequency", title ="Articles per author")
authors_net <- articles %>% select (6:19)
author_list <- flatten(by_row(authors_net, ..f = function(x) flatten_chr(x), .labels = FALSE))
library(purrr)
library(tidyr)
